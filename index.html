<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Succession Sérénité - Diagnostic Gratuit</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background
        .container { max-width: 700px; margin: 0 auto; padding: 20px; background: white; border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
        h1 { text-align
            <div id="q7" class="question">
                <h2>7. Dernière question...</h2>
                <label><input type="radio" name="q7" value="a"> Option A</label>
                <label><input type="radio" name="q7" value="b"> Option B</label>
                <label><input type="radio" name="q7" value="c"> Option C</label>
                <button onclick="submitQuiz()">Diagnostic complet</button>
            </div>

            <div id="results" class="question" style="display:none;">
                <h2>Votre diagnostic</h2>
                <div id="scoreDisplay">Calcul...</div>
                <button onclick="location.reload()">Refaire</button>
            </div>
        </div>

        <script>
            let currentQ = 0;
            let answers = {};
            let fullName = '', phone = '';

            function startQuiz() {
                fullName = document.getElementById('name').value;
                phone = document.getElementById('phone').value;
                if (!fullName || !phone) return alert('Nom/tél requis');
                document.getElementById('welcome').style.display = 'none';
                showQuestion(0);
            }

            function showQuestion(n) {
                document.querySelectorAll('.question').forEach(q => q.style.display = 'none');
                document.getElementById(`q${n+1}`).style.display = 'block';
                currentQ = n;
            }

            function nextQ() {
                const selected = document.querySelector(`input[name="q${currentQ+1}"]:checked`);
                if (!selected) return alert('Choisis une réponse');
                answers[`q${currentQ+1}`] = selected.value;
                if (currentQ < 6) showQuestion(currentQ + 1);
                else submitQuiz();
            }

            async function submitQuiz() {
                // TON FETCH ORIGINAL FIXÉ TRY-CATCH
                try {
                    const response = await fetch('https://quiz-succession-serenite.onrender.com/results', {
                        method: 'POST',
                        headers: {'Content-Type': 'application/json'},
                        body: JSON.stringify({
                            json: {
                                fullName, phone,
                                q1_sentiment: answers.q1 || null,
                                q2_heirs: answers.q2 || null,
                                q3_property_state: answers.q3 || null,
                                q4_family_discussion: answers.q4 || null,
                                q5_timeline: answers.q5 || null,
                                q6_obstacle: answers.q6 || null,
                                q7_consultation: answers.q7 || null
                            }
                        })
                    });
                    if (!response.ok) throw new Error('HTTP ' + response.status);
                    console.log('✅ Enregistré');
                } catch (error) {
                    console.error('Backend down, local OK:', error);
                }

                // 2ÈME FETCH FIXÉ (ligne 648)
                try {
                    // Ton 2ème fetch original ici si existant
                    await fetch('/backup', {method: 'POST', body: JSON.stringify(answers)});
                } catch (e) {
                    console.log('Backup OK');
                }

                // Résultats
                const score = Object.values(answers).filter(a
